<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Cell Counter</title>
    <link rel="stylesheet" href="./StyleSheet/fung.css">
    <style type="text/css" id="current_style">
        .selected_cell {
            background-color: lightgray;
        }
    </style>
</head>
<body>

<div id="content">

    <h1>Cell Counter</h1>

    <div class="user_input_area">

        <span class="input_title">Rows:</span>
        <input class="user_input" id="row_input" type="number" value="inputedRows">

        <br>

        <span class="input_title">Columns:</span>
        <input class="user_input" id="column_input" type="number" value="inputedColumns">

        <br>

        <button onclick="createCells()">Create!</button>
        <button onclick="clearInput()">Clear!</button>
        <button onclick="countCells()">Count!</button>

        <br>

        <span>Color: </span><input type="text" value="lightgray" onchange="changeSelectedColor(this)">

        <br>

        <span>Sum: </span>

        <br>

        <span id="selected_cells">Selected Cells: <br></span>

    </div>

    <div class="cells_area">
        <table id="cells_table">

        </table>
    </div>

</div>
<script type="text/javascript">

    var rowsInput = document.getElementById('row_input');
    var columnsInput = document.getElementById('column_input');
    var cellsTable = document.getElementById('cells_table');
    var style = document.getElementById('current_style');

    function clearInput() {
        rowsInput.value = '';
        columnsInput.value = '';
    }

    function createCells() {
        var columns = columnsInput.value;
        var rows = rowsInput.value;
        cellsTable.innerHTML = "";
        var tableContent = ''
        tableContent += '<tr>';
        for (var i = 0; i <= columns; i++) {
            tableContent += '<td>' + i + '</td>'
        }
        tableContent += '</tr>';

        for (var i = 0; i < rows; i++) {
            tableContent += '<tr><td>' + (i + 1) + '</td>';
            for (var j = 0; j < columns; j++) {
                tableContent += '<td class="cell" row="' + (i+1) + '" column="' + (j+1) + '" onclick="selectCell(this)"></td>'
            }
            tableContent += '</tr>';
        }

        cellsTable.innerHTML += tableContent;
    }

    function selectCell(object) {
        object.className = object.className == 'cell selected_cell' ? 'cell' : 'cell selected_cell';
    }

    function countCells() {
        var allCells = document.getElementsByClassName('cell');
        var selectedCellElement = document.getElementById('selected_cells');
        selectedCellElement.innerHTML = 'Selected Cells: <br>';
        for (var i = 0; i < allCells.length; i++) {
            if (allCells[i].className.indexOf('selected_cell') >= 0) {
                selectedCellElement.innerHTML += ' ( ' + allCells[i].getAttribute('column') + ' , ' + allCells[i].getAttribute('row') + ' ) ';
            }
        }
    }

    function changeSelectedColor(object) {
        style.innerHTML = '.selected_cell {background-color: ' + object.value + ';}'
    }

</script>

</body>
</html>